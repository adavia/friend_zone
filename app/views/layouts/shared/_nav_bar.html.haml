%nav.navbar{class: "navbar-default navbar-fixed-top",
  role: "navigation"}
  .container
    .navbar-header
      = link_to "Friend Zone", root_path,
        class: "navbar-brand"
      %button{type: "button",
        class: "navbar-toggle collapsed",
        "data-toggle": "collapse",
        "data-target": "#collapse"}
        %span.sr-only Toggle navigation
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar

    .collapse.navbar-collapse#collapse
      %ul.nav.navbar-nav.navbar-right
        - unless user_signed_in?
          %li{class: active_link(new_user_registration_path)}
            = link_to "Sign up", new_user_registration_path
          %li{class: active_link(new_user_session_path)}
            = link_to "Sign in", new_user_session_path

        - if user_signed_in?
          %p.navbar-text
            Signed in as #{current_user}
          = content_tag :li, class: "dropdown",
            data: { behavior: "messages", messages: render(template: "messages/index", formats: [:json])} do
            = link_to "#",
              html_options = {"aria-expanded": false,
              "aria-haspopup": true, "data-toggle": "dropdown",
              "data-behavior": "messages-link",
              role: "button", class: "dropdown-toggle"} do

              = fa_icon("comment")
              %span#unread-messages.label.label-danger
              %span.caret
            %ul.dropdown-menu
              #messages-list.navdrop-content
          = content_tag :li, class: "dropdown",
            data: { behavior: "notifications", notifications: render(template: "notifications/index", formats: [:json])} do
            = link_to "#",
              html_options = {"aria-expanded": false,
              "aria-haspopup": true, "data-toggle": "dropdown",
              "data-behavior": "notifications-link",
              role: "button", class: "dropdown-toggle"} do

              = fa_icon("bullhorn")
              %span#unread-notifications.label.label-danger
              %span.caret
            %ul.dropdown-menu
              #notifications-list.navdrop-content
          %li
            = link_to "Sign out",
              destroy_user_session_path, method: :delete
